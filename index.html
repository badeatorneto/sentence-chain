<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sentence Chain - Collaborative Storytelling Platform</title>

<style>
  /* ===================================
   GLOBAL STYLES & RESET
   =================================== */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Minimalistic Color Palette */
    --primary-color: #000000;
    --primary-dark: #000000;
    --primary-light: #333333;
    --secondary-color: #666666;
    --accent-color: #000000;
    
    --text-dark: #000000;
    --text-medium: #333333;
    --text-light: #666666;
    --text-lighter: #999999;
    
    --bg-white: #ffffff;
    --bg-light: #fafafa;
    --bg-lighter: #f5f5f5;
    --bg-dark: #000000;
    
    --border-color: #e0e0e0;
    --border-light: #f0f0f0;
    
    --success-color: #000000;
    --error-color: #000000;
    --warning-color: #666666;
    --info-color: #000000;
    
    /* Typography */
    --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
    --font-display: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
    
    /* Spacing */
    --section-padding: 4rem 0;
    --container-padding: 1.5rem;
    
    /* Effects */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.03);
    --shadow-md: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
    --shadow-lg: 0 2px 8px 0 rgba(0, 0, 0, 0.08);
    --shadow-xl: 0 4px 12px 0 rgba(0, 0, 0, 0.1);
    
    --radius-sm: 4px;
    --radius-md: 6px;
    --radius-lg: 8px;
    --radius-xl: 12px;
    
    --transition-fast: 0.15s ease;
    --transition-base: 0.2s ease;
    --transition-slow: 0.3s ease;
}

html {
    scroll-behavior: smooth;
    font-size: 16px;
}

body {
    font-family: var(--font-primary);
    color: var(--text-dark);
    background-color: var(--bg-white);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* ===================================
   LOADING ANIMATION
   =================================== */

.loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--bg-white);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 1;
    transition: opacity 0.5s ease, visibility 0.5s ease;
}

.loader.hidden {
    opacity: 0;
    visibility: hidden;
}

.loader-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid var(--bg-lighter);
    border-top-color: var(--primary-color);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ===================================
   CONTAINER & LAYOUT
   =================================== */

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--container-padding);
}

.section {
    padding: var(--section-padding);
}

.section-header {
    text-align: center;
    margin-bottom: 3rem;
}

.section-title {
    font-size: 2rem;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 0.75rem;
    letter-spacing: -0.02em;
}

.section-subtitle {
    font-size: 1rem;
    color: var(--text-light);
    max-width: 600px;
    margin: 0 auto;
}

/* ===================================
   NAVIGATION BAR
   =================================== */

.navbar {
    background-color: var(--bg-white);
    border-bottom: 1px solid var(--border-color);
    position: sticky;
    top: 0;
    z-index: 1000;
    transition: border-color var(--transition-base);
}

.navbar.scrolled {
    border-bottom: 1px solid var(--border-light);
}

.nav-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.25rem var(--container-padding);
}

.nav-brand a {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-dark);
    text-decoration: none;
    letter-spacing: -0.02em;
}

.nav-brand a:hover {
    color: var(--text-medium);
}

.nav-menu {
    display: flex;
    list-style: none;
    gap: 2.5rem;
    align-items: center;
}

.nav-link {
    color: var(--text-light);
    text-decoration: none;
    font-weight: 400;
    font-size: 0.9375rem;
    transition: color var(--transition-fast);
}

.nav-link:hover,
.nav-link.active {
    color: var(--text-dark);
}

.nav-toggle {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    gap: 0.3rem;
}

.nav-toggle span {
    width: 22px;
    height: 1.5px;
    background-color: var(--text-dark);
    transition: var(--transition-base);
}

/* ===================================
   HERO SECTION
   =================================== */

.hero {
    position: relative;
    background-color: var(--bg-white);
    color: var(--text-dark);
    padding: 6rem 0 5rem;
    border-bottom: 1px solid var(--border-color);
}

.hero-decoration {
    display: none;
}

.hero-content {
    position: relative;
    z-index: 1;
    text-align: center;
    max-width: 700px;
    margin: 0 auto;
}

.hero-title {
    font-size: 2.75rem;
    font-weight: 600;
    line-height: 1.2;
    margin-bottom: 1.25rem;
    letter-spacing: -0.03em;
    animation: fadeInUp 0.6s ease;
}

.hero-subtitle {
    font-size: 1.125rem;
    color: var(--text-light);
    margin-bottom: 2.5rem;
    font-weight: 400;
    animation: fadeInUp 0.6s ease 0.1s both;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ===================================
   BUTTONS
   =================================== */

.btn {
    display: inline-block;
    padding: 0.75rem 1.75rem;
    font-family: var(--font-primary);
    font-size: 0.9375rem;
    font-weight: 500;
    text-align: center;
    text-decoration: none;
    border: 1px solid var(--text-dark);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-base);
    outline: none;
    background-color: transparent;
}

.btn-primary {
    background-color: var(--text-dark);
    color: white;
    border-color: var(--text-dark);
}

.btn-primary:hover {
    background-color: var(--text-medium);
    border-color: var(--text-medium);
}

.btn-primary:active {
    transform: scale(0.98);
}

.btn-large {
    padding: 0.875rem 2rem;
    font-size: 1rem;
    animation: fadeInUp 0.6s ease 0.2s both;
}

.btn-submit {
    width: 100%;
    margin-top: 1rem;
}

/* ===================================
   STORY SECTION
   =================================== */

.story-section {
    background-color: var(--bg-white);
}

.story-container {
    background-color: var(--bg-white);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 2rem;
    max-height: 600px;
    overflow-y: auto;
    scroll-behavior: smooth;
}

/* Custom Scrollbar */
.story-container::-webkit-scrollbar {
    width: 6px;
}

.story-container::-webkit-scrollbar-track {
    background: transparent;
}

.story-container::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: var(--radius-sm);
}

.story-container::-webkit-scrollbar-thumb:hover {
    background: var(--text-lighter);
}

.story-empty {
    text-align: center;
    padding: 4rem 2rem;
    color: var(--text-lighter);
}

.empty-icon {
    width: 48px;
    height: 48px;
    margin: 0 auto 1rem;
    color: var(--text-lighter);
}

.sentence-card {
    background-color: var(--bg-white);
    border-bottom: 1px solid var(--border-light);
    padding: 1.5rem 0;
    margin-bottom: 0;
    transition: all var(--transition-base);
    animation: fadeIn 0.4s ease;
}

.sentence-card:last-child {
    border-bottom: none;
}

.sentence-card:hover {
    background-color: var(--bg-light);
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.sentence-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.sentence-meta {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.sentence-author {
    font-weight: 500;
    color: var(--text-dark);
    font-size: 0.875rem;
}

.sentence-time {
    font-size: 0.8125rem;
    color: var(--text-lighter);
}

.sentence-text {
    font-size: 1rem;
    line-height: 1.7;
    color: var(--text-dark);
    margin-bottom: 0.75rem;
}

.sentence-actions {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.like-btn {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.4rem 0.75rem;
    background-color: transparent;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
    font-size: 0.8125rem;
    font-weight: 400;
    color: var(--text-light);
}

.like-btn:hover {
    background-color: var(--bg-light);
    border-color: var(--text-dark);
}

.like-btn.liked {
    background-color: var(--text-dark);
    border-color: var(--text-dark);
    color: white;
}

.like-icon {
    width: 14px;
    height: 14px;
    fill: none;
    stroke: currentColor;
    stroke-width: 2;
    transition: all var(--transition-fast);
}

.like-btn.liked .like-icon {
    fill: currentColor;
}

/* ===================================
   TOP SENTENCES SECTION
   =================================== */

.top-sentences-section {
    background-color: var(--bg-light);
}

.top-sentences-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}

.top-sentence-card {
    background-color: var(--bg-white);
    border: 1px solid var(--border-color);
    padding: 2rem;
    border-radius: var(--radius-lg);
    position: relative;
    animation: fadeIn 0.4s ease;
}

.top-sentence-card::before {
    display: none;
}

.top-sentence-rank {
    position: absolute;
    top: 1.25rem;
    right: 1.25rem;
    width: 32px;
    height: 32px;
    background-color: var(--text-dark);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.875rem;
}

.top-sentence-text {
    font-size: 1rem;
    line-height: 1.7;
    margin-bottom: 1.25rem;
    color: var(--text-dark);
}

.top-sentence-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 1rem;
    border-top: 1px solid var(--border-light);
}

.top-sentence-author {
    font-weight: 500;
    font-size: 0.875rem;
    color: var(--text-medium);
}

.top-sentence-likes {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-weight: 500;
    font-size: 0.875rem;
    color: var(--text-dark);
}

.top-sentence-empty {
    grid-column: 1 / -1;
    text-align: center;
    padding: 3rem;
    color: var(--text-lighter);
}

/* ===================================
   FORM SECTION
   =================================== */

.form-section {
    background-color: var(--bg-white);
    border-top: 1px solid var(--border-color);
}

.form-wrapper {
    max-width: 600px;
    margin: 0 auto;
    background-color: var(--bg-white);
    padding: 2.5rem;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
}

.form-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 0.5rem;
    letter-spacing: -0.02em;
}

.form-description {
    color: var(--text-light);
    margin-bottom: 2rem;
    font-size: 0.9375rem;
}

/* ===================================
   NOTIFICATIONS
   =================================== */

.notification {
    padding: 1rem 1.25rem;
    border-radius: var(--radius-md);
    margin-bottom: 1.5rem;
    display: none;
    align-items: center;
    gap: 0.875rem;
    animation: slideDown 0.3s ease;
    border: 1px solid;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.notification.show {
    display: flex;
}

.notification-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

.notification.success {
    background-color: var(--bg-lighter);
    color: var(--text-dark);
    border-color: var(--border-color);
}

.notification.error {
    background-color: var(--bg-lighter);
    color: var(--text-dark);
    border-color: var(--text-dark);
}

.notification.info {
    background-color: var(--bg-lighter);
    color: var(--text-dark);
    border-color: var(--border-color);
}

/* ===================================
   FORM ELEMENTS
   =================================== */

.sentence-form {
    display: flex;
    flex-direction: column;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    font-weight: 500;
    color: var(--text-dark);
    margin-bottom: 0.5rem;
    font-size: 0.875rem;
}

.form-input,
.form-textarea {
    width: 100%;
    padding: 0.75rem 0.875rem;
    font-family: var(--font-primary);
    font-size: 0.9375rem;
    color: var(--text-dark);
    background-color: var(--bg-white);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    transition: all var(--transition-fast);
    outline: none;
}

.form-input:focus,
.form-textarea:focus {
    border-color: var(--text-dark);
    background-color: var(--bg-light);
}

.form-textarea {
    resize: vertical;
    min-height: 100px;
    line-height: 1.6;
}

.character-counter {
    text-align: right;
    font-size: 0.8125rem;
    color: var(--text-lighter);
    margin-top: 0.5rem;
}

.character-counter.warning {
    color: var(--text-medium);
}

.character-counter.error {
    color: var(--text-dark);
    font-weight: 500;
}

/* ===================================
   FOOTER
   =================================== */

.footer {
    background-color: var(--bg-white);
    border-top: 1px solid var(--border-color);
    color: var(--text-medium);
    padding: 3rem 0 1.5rem;
}

.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
}

.footer-brand {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 0.75rem;
}

.footer-description {
    color: var(--text-light);
    line-height: 1.6;
    font-size: 0.9375rem;
}

.footer-heading {
    color: var(--text-dark);
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.footer-links {
    list-style: none;
}

.footer-links li {
    margin-bottom: 0.625rem;
}

.footer-links a {
    color: var(--text-light);
    text-decoration: none;
    transition: color var(--transition-fast);
    font-size: 0.9375rem;
}

.footer-links a:hover {
    color: var(--text-dark);
}

.social-icons {
    display: flex;
    gap: 0.75rem;
}

.social-icon {
    width: 36px;
    height: 36px;
    background-color: var(--bg-lighter);
    border: 1px solid var(--border-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-medium);
    transition: all var(--transition-base);
}

.social-icon:hover {
    background-color: var(--text-dark);
    border-color: var(--text-dark);
    color: white;
}

.social-icon svg {
    width: 16px;
    height: 16px;
}

.footer-bottom {
    text-align: center;
    padding-top: 2rem;
    border-top: 1px solid var(--border-color);
    color: var(--text-light);
    font-size: 0.8125rem;
}

/* ===================================
   RESPONSIVE DESIGN
   =================================== */

@media (max-width: 768px) {
    :root {
        --section-padding: 3rem 0;
    }
    
    .nav-menu {
        position: fixed;
        top: 70px;
        left: -100%;
        width: 100%;
        height: calc(100vh - 70px);
        background-color: var(--bg-white);
        flex-direction: column;
        align-items: flex-start;
        padding: 2rem;
        gap: 1.5rem;
        transition: left var(--transition-base);
        border-top: 1px solid var(--border-color);
    }
    
    .nav-menu.active {
        left: 0;
    }
    
    .nav-toggle {
        display: flex;
    }
    
    .nav-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
    }
    
    .nav-toggle.active span:nth-child(2) {
        opacity: 0;
    }
    
    .nav-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(6px, -6px);
    }
    
    .hero {
        padding: 4rem 0 3rem;
    }
    
    .hero-title {
        font-size: 2rem;
    }
    
    .hero-subtitle {
        font-size: 1rem;
    }
    
    .section-title {
        font-size: 1.75rem;
    }
    
    .form-wrapper {
        padding: 2rem 1.5rem;
    }
    
    .story-container {
        padding: 1.5rem;
    }
    
    .top-sentences-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .hero-title {
        font-size: 1.75rem;
    }
    
    .section-title {
        font-size: 1.5rem;
    }
    
    .sentence-text {
        font-size: 0.9375rem;
    }
    
    .form-wrapper {
        padding: 1.5rem 1rem;
    }
}
/* ===== PASTE OF styles.css ===== */
*{margin:0;padding:0;box-sizing:border-box;}
:root{
--primary-color:#000;
--primary-dark:#000;
--primary-light:#333;
--secondary-color:#666;
--accent-color:#000;
--text-dark:#000;
--text-medium:#333;
--text-light:#666;
--text-lighter:#999;
--bg-white:#fff;
--bg-light:#fafafa;
--bg-lighter:#f5f5f5;
--bg-dark:#000;
--border-color:#e0e0e0;
--border-light:#f0f0f0;
--font-primary:-apple-system,BlinkMacSystemFont,'Segoe UI','Helvetica Neue',Arial,sans-serif;
--section-padding:4rem 0;
--container-padding:1.5rem;
--radius-md:6px;
--transition-base:.2s ease;
}

body{font-family:var(--font-primary);color:var(--text-dark);background:#fff;line-height:1.6}

/* (shortened for readability in this message — paste your full CSS here exactly) */
</style>
</head>

<body>

<!-- ===== PASTE OF index.html BODY CONTENT ===== -->
<nav class="navbar">
<div class="container nav-container">
<div class="nav-brand"><a href="#">Sentence Chain</a></div>
</div>
</nav>

<section class="hero">
<div class="container hero-content">
<h1 class="hero-title">Build Today's Story — One Sentence at a Time</h1>
<p class="hero-subtitle">Write one sentence and become part of a global chain of creativity.</p>
</div>
</section>

<!-- keep the rest of your HTML exactly the same -->

<!-- Optional: paste your script.js here -->
<script>
  /* ===================================
   GLOBAL VARIABLES & INITIALIZATION
   =================================== */

// Storage keys
const STORAGE_KEYS = {
    SENTENCES: 'sentenceChain_sentences',
    SUBMISSION_DATE: 'sentenceChain_submissionDate',
    LIKES: 'sentenceChain_likes'
};

// Initialize on page load
document.addEventListener('DOMContentLoaded', () => {
    initializePage();
    setupEventListeners();
    loadSentences();
    displayTopSentences();
    checkSubmissionStatus();
    startAutoRefresh();
    
    // Hide loader after content loads
    setTimeout(() => {
        document.getElementById('loader').classList.add('hidden');
    }, 500);
});

/* ===================================
   INITIALIZATION FUNCTIONS
   =================================== */

function initializePage() {
    // Set today's date
    const today = getCurrentDate();
    const dateElement = document.getElementById('storyDate');
    if (dateElement) {
        dateElement.textContent = formatDate(new Date());
    }
    
    // Check if it's a new day and reset if needed
    checkAndResetDaily();
    
    // Add scroll effect to navbar
    window.addEventListener('scroll', () => {
        const navbar = document.getElementById('navbar');
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });
}

function setupEventListeners() {
    // Mobile navigation toggle
    const navToggle = document.getElementById('navToggle');
    const navMenu = document.getElementById('navMenu');
    
    if (navToggle && navMenu) {
        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            navToggle.classList.toggle('active');
        });
        
        // Close menu when clicking a link
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                navMenu.classList.remove('active');
                navToggle.classList.remove('active');
            });
        });
    }
    
    // Hero button scroll
    const heroBtn = document.getElementById('heroBtn');
    if (heroBtn) {
        heroBtn.addEventListener('click', () => {
            const formSection = document.getElementById('formSection');
            if (formSection) {
                formSection.scrollIntoView({ behavior: 'smooth' });
            }
        });
    }
    
    // Form submission
    const sentenceForm = document.getElementById('sentenceForm');
    if (sentenceForm) {
        sentenceForm.addEventListener('submit', handleFormSubmit);
    }
    
    // Character counter
    const sentenceInput = document.getElementById('sentence');
    const charCount = document.getElementById('charCount');
    
    if (sentenceInput && charCount) {
        sentenceInput.addEventListener('input', () => {
            const count = sentenceInput.value.length;
            charCount.textContent = count;
            
            const counterElement = charCount.parentElement;
            counterElement.classList.remove('warning', 'error');
            
            if (count > 180) {
                counterElement.classList.add('warning');
            }
            if (count === 200) {
                counterElement.classList.add('error');
            }
        });
    }
}

/* ===================================
   DATE & TIME FUNCTIONS
   =================================== */

function getCurrentDate() {
    const now = new Date();
    return now.toISOString().split('T')[0]; // YYYY-MM-DD format
}

function formatDate(date) {
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    return date.toLocaleDateString('en-US', options);
}

function formatTime(date) {
    return date.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit' 
    });
}

function getTimeAgo(timestamp) {
    const now = new Date();
    const sentenceTime = new Date(timestamp);
    const diffMs = now - sentenceTime;
    const diffMins = Math.floor(diffMs / 60000);
    const diffHours = Math.floor(diffMins / 60);
    
    if (diffMins < 1) return 'Just now';
    if (diffMins < 60) return `${diffMins} min${diffMins > 1 ? 's' : ''} ago`;
    if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
    return formatTime(sentenceTime);
}

/* ===================================
   STORAGE FUNCTIONS
   =================================== */

function getSentences() {
    const stored = localStorage.getItem(STORAGE_KEYS.SENTENCES);
    if (!stored) return [];
    
    const allSentences = JSON.parse(stored);
    const today = getCurrentDate();
    
    // Return only today's sentences
    return allSentences.filter(s => s.date === today);
}

function saveSentence(sentenceData) {
    const stored = localStorage.getItem(STORAGE_KEYS.SENTENCES);
    const allSentences = stored ? JSON.parse(stored) : [];
    
    allSentences.push(sentenceData);
    localStorage.setItem(STORAGE_KEYS.SENTENCES, JSON.stringify(allSentences));
}

function getLikes() {
    const stored = localStorage.getItem(STORAGE_KEYS.LIKES);
    return stored ? JSON.parse(stored) : {};
}

function saveLikes(likes) {
    localStorage.setItem(STORAGE_KEYS.LIKES, JSON.stringify(likes));
}

function checkAndResetDaily() {
    const today = getCurrentDate();
    const stored = localStorage.getItem(STORAGE_KEYS.SENTENCES);
    
    if (!stored) {
        // First time user - add sample sentences
        initializeSampleData();
        return;
    }
    
    const allSentences = JSON.parse(stored);
    const todaySentences = allSentences.filter(s => s.date === today);
    
    // If no sentences today, it's a new day - reset submission status
    if (todaySentences.length === 0) {
        localStorage.removeItem(STORAGE_KEYS.SUBMISSION_DATE);
    }
}

function initializeSampleData() {
    const today = getCurrentDate();
    const sampleSentences = [
        {
            id: generateId(),
            text: "In a world where time moved backwards, Sarah woke up knowing exactly how her day would end.",
            author: "TimeKeeper",
            timestamp: new Date(Date.now() - 3600000).toISOString(), // 1 hour ago
            date: today,
            likes: 12
        },
        {
            id: generateId(),
            text: "She rushed to the coffee shop, determined to prevent the spill that would ruin her favorite book.",
            author: "StoryWeaver",
            timestamp: new Date(Date.now() - 1800000).toISOString(), // 30 mins ago
            date: today,
            likes: 8
        },
        {
            id: generateId(),
            text: "But when she arrived, the barista looked at her with knowing eyes and said, 'You're early today.'",
            author: "Anonymous",
            timestamp: new Date(Date.now() - 900000).toISOString(), // 15 mins ago
            date: today,
            likes: 15
        }
    ];
    
    localStorage.setItem(STORAGE_KEYS.SENTENCES, JSON.stringify(sampleSentences));
}

/* ===================================
   FORM HANDLING
   =================================== */

function handleFormSubmit(e) {
    e.preventDefault();
    
    // Check if already submitted today
    const submissionDate = localStorage.getItem(STORAGE_KEYS.SUBMISSION_DATE);
    const today = getCurrentDate();
    
    if (submissionDate === today) {
        showNotification('alreadySubmittedNotice');
        return;
    }
    
    const usernameInput = document.getElementById('username');
    const sentenceInput = document.getElementById('sentence');
    
    const username = usernameInput.value.trim() || 'Anonymous';
    const sentence = sentenceInput.value.trim();
    
    // Validation
    if (!sentence) {
        showNotification('errorNotification', 'Please enter a sentence');
        return;
    }
    
    if (sentence.length > 200) {
        showNotification('errorNotification', 'Sentence must be 200 characters or less');
        return;
    }
    
    // Create sentence object
    const newSentence = {
        id: generateId(),
        text: sentence,
        author: username,
        timestamp: new Date().toISOString(),
        date: today,
        likes: 0
    };
    
    // Save sentence
    saveSentence(newSentence);
    
    // Mark as submitted today
    localStorage.setItem(STORAGE_KEYS.SUBMISSION_DATE, today);
    
    // Show success notification
    showNotification('successNotification');
    
    // Add sentence to display immediately
    addSentenceToDOM(newSentence);
    
    // Scroll to the new sentence
    setTimeout(() => {
        const storyContainer = document.getElementById('storyContainer');
        storyContainer.scrollTop = storyContainer.scrollHeight;
    }, 100);
    
    // Clear form
    sentenceInput.value = '';
    document.getElementById('charCount').textContent = '0';
    
    // Hide form and show submitted notice after delay
    setTimeout(() => {
        checkSubmissionStatus();
    }, 2000);
    
    // Update top sentences
    displayTopSentences();
}

function showNotification(notificationId, customMessage = null) {
    // Hide all notifications first
    const notifications = document.querySelectorAll('.notification');
    notifications.forEach(n => n.classList.remove('show'));
    
    // Show the specified notification
    const notification = document.getElementById(notificationId);
    if (notification) {
        if (customMessage && notificationId === 'errorNotification') {
            document.getElementById('errorMessage').textContent = customMessage;
        }
        notification.classList.add('show');
        
        // Auto-hide after 5 seconds
        setTimeout(() => {
            notification.classList.remove('show');
        }, 5000);
    }
}

function checkSubmissionStatus() {
    const submissionDate = localStorage.getItem(STORAGE_KEYS.SUBMISSION_DATE);
    const today = getCurrentDate();
    const form = document.getElementById('sentenceForm');
    const notice = document.getElementById('alreadySubmittedNotice');
    
    if (submissionDate === today) {
        if (form) form.style.display = 'none';
        if (notice) notice.classList.add('show');
    } else {
        if (form) form.style.display = 'flex';
        if (notice) notice.classList.remove('show');
    }
}

/* ===================================
   DISPLAY FUNCTIONS
   =================================== */

function loadSentences() {
    const sentences = getSentences();
    const container = document.getElementById('storyContainer');
    const emptyMessage = document.getElementById('emptyMessage');
    
    if (!container) return;
    
    // Remove existing sentence cards
    const existingCards = container.querySelectorAll('.sentence-card');
    existingCards.forEach(card => card.remove());
    
    if (sentences.length === 0) {
        if (emptyMessage) emptyMessage.style.display = 'block';
        return;
    }
    
    if (emptyMessage) emptyMessage.style.display = 'none';
    
    // Sort by timestamp
    sentences.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
    
    // Display each sentence
    sentences.forEach(sentence => {
        addSentenceToDOM(sentence, false);
    });
}

function addSentenceToDOM(sentence, animate = true) {
    const container = document.getElementById('storyContainer');
    const emptyMessage = document.getElementById('emptyMessage');
    
    if (!container) return;
    
    if (emptyMessage) emptyMessage.style.display = 'none';
    
    const card = createSentenceCard(sentence);
    
    if (!animate) {
        card.style.animation = 'none';
    }
    
    container.appendChild(card);
}

function createSentenceCard(sentence) {
    const card = document.createElement('div');
    card.className = 'sentence-card';
    card.dataset.id = sentence.id;
    
    const likes = getLikes();
    const userLiked = likes[sentence.id] || false;
    const likeCount = sentence.likes || 0;
    
    card.innerHTML = `
        <div class="sentence-header">
            <div class="sentence-meta">
                <span class="sentence-author">${escapeHtml(sentence.author)}</span>
                <span class="sentence-time">${getTimeAgo(sentence.timestamp)}</span>
            </div>
        </div>
        <p class="sentence-text">${escapeHtml(sentence.text)}</p>
        <div class="sentence-actions">
            <button class="like-btn ${userLiked ? 'liked' : ''}" data-id="${sentence.id}">
                <svg class="like-icon" viewBox="0 0 24 24">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                </svg>
                <span class="like-count">${likeCount}</span>
            </button>
        </div>
    `;
    
    // Add like button event listener
    const likeBtn = card.querySelector('.like-btn');
    likeBtn.addEventListener('click', () => handleLike(sentence.id));
    
    return card;
}

function handleLike(sentenceId) {
    const likes = getLikes();
    const sentences = getSentences();
    const sentence = sentences.find(s => s.id === sentenceId);
    
    if (!sentence) return;
    
    // Toggle like
    if (likes[sentenceId]) {
        // Unlike
        delete likes[sentenceId];
        sentence.likes = Math.max(0, (sentence.likes || 0) - 1);
    } else {
        // Like
        likes[sentenceId] = true;
        sentence.likes = (sentence.likes || 0) + 1;
    }
    
    // Save updated data
    saveLikes(likes);
    updateSentence(sentence);
    
    // Update display
    updateLikeButton(sentenceId, likes[sentenceId], sentence.likes);
    displayTopSentences();
}

function updateLikeButton(sentenceId, liked, count) {
    const card = document.querySelector(`[data-id="${sentenceId}"]`);
    if (!card) return;
    
    const likeBtn = card.querySelector('.like-btn');
    const likeCount = card.querySelector('.like-count');
    
    if (liked) {
        likeBtn.classList.add('liked');
    } else {
        likeBtn.classList.remove('liked');
    }
    
    likeCount.textContent = count;
}

function updateSentence(updatedSentence) {
    const stored = localStorage.getItem(STORAGE_KEYS.SENTENCES);
    if (!stored) return;
    
    const allSentences = JSON.parse(stored);
    const index = allSentences.findIndex(s => s.id === updatedSentence.id);
    
    if (index !== -1) {
        allSentences[index] = updatedSentence;
        localStorage.setItem(STORAGE_KEYS.SENTENCES, JSON.stringify(allSentences));
    }
}

/* ===================================
   TOP SENTENCES DISPLAY
   =================================== */

function displayTopSentences() {
    const sentences = getSentences();
    const container = document.getElementById('topSentencesGrid');
    
    if (!container) return;
    
    // Clear existing content
    container.innerHTML = '';
    
    // Get top 3 sentences by likes
    const topSentences = sentences
        .filter(s => (s.likes || 0) > 0)
        .sort((a, b) => (b.likes || 0) - (a.likes || 0))
        .slice(0, 3);
    
    if (topSentences.length === 0) {
        container.innerHTML = `
            <div class="top-sentence-empty">
                <p>No liked sentences yet. Be the first to like a sentence!</p>
            </div>
        `;
        return;
    }
    
    topSentences.forEach((sentence, index) => {
        const card = createTopSentenceCard(sentence, index + 1);
        container.appendChild(card);
    });
}

function createTopSentenceCard(sentence, rank) {
    const card = document.createElement('div');
    card.className = 'top-sentence-card';
    
    const gradients = [
        'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
        'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
        'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'
    ];
    
    card.style.background = gradients[rank - 1] || gradients[0];
    
    card.innerHTML = `
        <div class="top-sentence-rank">#${rank}</div>
        <p class="top-sentence-text">${escapeHtml(sentence.text)}</p>
        <div class="top-sentence-footer">
            <span class="top-sentence-author">${escapeHtml(sentence.author)}</span>
            <span class="top-sentence-likes">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                </svg>
                ${sentence.likes}
            </span>
        </div>
    `;
    
    return card;
}

/* ===================================
   AUTO-REFRESH FUNCTIONALITY
   =================================== */

function startAutoRefresh() {
    // Refresh every 30 seconds
    setInterval(() => {
        loadSentences();
        displayTopSentences();
    }, 30000);
}

/* ===================================
   UTILITY FUNCTIONS
   =================================== */

function generateId() {
    return Date.now().toString(36) + Math.random().toString(36).substr(2);
}

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

/* ===================================
   ARCHIVE PAGE FUNCTIONS
   =================================== */

function loadArchive() {
    const archiveContainer = document.getElementById('archiveContainer');
    if (!archiveContainer) return;
    
    const stored = localStorage.getItem(STORAGE_KEYS.SENTENCES);
    if (!stored) {
        archiveContainer.innerHTML = `
            <div class="archive-empty">
                <p>No archived stories yet. Check back after creating some stories!</p>
            </div>
        `;
        return;
    }
    
    const allSentences = JSON.parse(stored);
    
    // Group sentences by date
    const groupedByDate = {};
    allSentences.forEach(sentence => {
        if (!groupedByDate[sentence.date]) {
            groupedByDate[sentence.date] = [];
        }
        groupedByDate[sentence.date].push(sentence);
    });
    
    // Sort dates in descending order
    const dates = Object.keys(groupedByDate).sort().reverse();
    
    if (dates.length === 0) {
        archiveContainer.innerHTML = `
            <div class="archive-empty">
                <p>No archived stories yet. Check back after creating some stories!</p>
            </div>
        `;
        return;
    }
    
    dates.forEach(date => {
        const sentences = groupedByDate[date].sort((a, b) => 
            new Date(a.timestamp) - new Date(b.timestamp)
        );
        
        const dateCard = createArchiveDateCard(date, sentences);
        archiveContainer.appendChild(dateCard);
    });
}

function createArchiveDateCard(date, sentences) {
    const card = document.createElement('div');
    card.className = 'archive-card';
    
    const dateObj = new Date(date + 'T00:00:00');
    const formattedDate = formatDate(dateObj);
    
    card.innerHTML = `
        <div class="archive-header">
            <h3 class="archive-date">${formattedDate}</h3>
            <span class="archive-count">${sentences.length} sentence${sentences.length !== 1 ? 's' : ''}</span>
        </div>
        <div class="archive-story">
            ${sentences.map(s => `
                <p class="archive-sentence">
                    <span class="archive-sentence-text">${escapeHtml(s.text)}</span>
                    <span class="archive-sentence-author">— ${escapeHtml(s.author)}</span>
                </p>
            `).join('')}
        </div>
    `;
    
    return card;
}

// Initialize archive page if we're on it
if (window.location.pathname.includes('archive.html')) {
    document.addEventListener('DOMContentLoaded', () => {
        loadArchive();
        setTimeout(() => {
            document.getElementById('loader').classList.add('hidden');
        }, 500);
    });
}
/* paste script.js here later */
</script>

</body>
</html>
